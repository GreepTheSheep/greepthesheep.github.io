import{S as g}from"./ShowcaseList-27786d03.js";import{_ as u,e as k,o as s,c as l,a as r,f as v,d,t as o,F as f,p as I,g as b}from"./index-9ce5e735.js";const y={props:{isDarkMode:{type:Boolean}},data(){return{wasInDarkMode:this.isDarkMode,data:{homeShowcase:[{name:"Trackmania projects",link:"/tm",description:"I've done some works with Trackmania, I've made a few plugins and extensions for Trackmania with Openplanet, and some libraries with Trackmania.io.",image:"tm.png"},{name:"Jellyfin for Node.js",link:"https://jellyfin-node.greep.fr",description:"The official Jellyfin SDK uses only TypeScript ES6 modules. So I wanted to port my own version of the SDK using only CommonJS modules, which is more easy to use for beginners.",image:"jellyfin.png"}],redirectLinks:[{path:"/discord",url:"https://discord.gg/K6UYGZThHJ"},{path:"/patreon",url:"https://www.patreon.com/Greep"},{path:"/sponsor",url:"https://github.com/sponsors/GreepTheSheep"},{path:"/rmc",url:"https://flinkblog.de/RMC/"},{path:"/rmcdev",url:"https://flinkblog.de/RMC/dev"}],sponsors:null,trackmaniaShowcase:[{name:"Random Map Challenge",link:"/rmc",description:"In collaboration with the youtuber Flink, the Random Map Challenge is a game mode in which you have to get as many track medals as possible in one hour on random maps.",image:"RMC-logo.png"},{name:"node-Trackmania.io",link:"https://tmio.greep.fr/",description:"node-trackmania.io is an API wrapper for the website Trackmania.io, it retuns all the useful informations from the Trackmania API for your Node.js projects",image:"tmio.png"},{name:"Trackmania Essentials for Node",link:"https://github.com/GreepTheSheep/node-tm-essentials",description:"A lightweight library in Node.js that provides formatting features and little additions for any development related to Trackmania.",image:"tm.png"},{name:"Trackmania.io Discord bot",link:"https://tmio.greep.fr/#/discord-bot",description:"A Discord bot that interacts with the Trackmania.io API",image:"tmio.png"},{name:"ManiaExchange Randomizer",link:"https://openplanet.dev/plugin/mxrandom",description:"An Openplanet plugin used extensively during the Flink's Random Map Challenge. The goal is to take a random map of the Trackmania game from the TrackmaniaExchange site and play it directly in the game.",image:"tmx_rand.png"},{name:"ManiaExchange Menu",link:"https://openplanet.dev/plugin/maniaexchange",description:"An Openplanet plugin that displays all the maps from the ManiaExchange network.",image:"tmx_op.png"},{name:"Speedrun tool",link:"https://openplanet.dev/plugin/speedrun",description:"A Speedrun Tool for Trackmania 2020",image:"tmSpeedruns.png"},{name:"Cup Of Another Day",link:"https://coad.greep.fr",description:"A Knockout competiton on random Tracks Of The Day. Every Tuesdays at 20:00 CEST",image:"coad.png"},{name:"Open FlagRush Cup",link:"https://liquipedia.net/trackmania/FlagRush_Anniversary_Cup",description:"A Cup on the FlagRush Gamemode, grab the flag with your team and score it to oppenent's base!",image:"TMFlagRush.png"}]},mapBackground:null,mapBackgroundFallback:{mxID:36270,url:"/img/opuntia.webp",name:"Opuntia",author:"Sláys & htimh"},backgroundAlpha:.65,colorModeInterval:null,bgIntervalDelay:20,bgIntervalTimer:0,bgIntervalDivWidth:0,bgInterval:null,bgIntervalDivDirectionFw:!0}},mounted(){window.fetch?this.fetchBackgroundImage():this.setBackgroundImage(),this.colorModeInterval=setInterval(()=>{this.isDarkMode||this.$emit("toggleDarkMode")},0),this.bgInterval=setInterval(this.backgroundImageInterval,1e3)},methods:{async fetchBackgroundImage(){this.bgIntervalTimer=0,this.bgIntervalDivDirectionFw=!this.bgIntervalDivDirectionFw;try{let e=await fetch("/api/trackmaniabackgrounds.json");if(!e||!e.ok)return console.error("Error while fecthing backgrounds from API:",e.status,e.statusText),this.mapBackground=null,this.setBackgroundImage();let t=await e.json(),c=Object.keys(t),i=this.randomItem(c),a=this.randomItem(t[i]);for(;this.mapBackground!=null&&a.mxID==this.mapBackground.mxID;)a=this.randomItem(t[i]);let n=await fetch(a.url);if(!n||!n.ok)return console.error("Error while fecthing background URL:",e.status,e.statusText),this.mapBackground=null,this.setBackgroundImage();this.mapBackground=a,this.setBackgroundImage(this.mapBackground)}catch{return this.mapBackground=null,this.setBackgroundImage()}},backgroundImageInterval(){if(this.bgIntervalTimer<this.bgIntervalDelay){this.bgIntervalTimer+=1;let e=this.bgIntervalTimer/this.bgIntervalDelay*100;this.bgIntervalDivDirectionFw?this.bgIntervalDivWidth=Math.floor(e/10):this.bgIntervalDivWidth=Math.ceil((100-e)/10),document.querySelector("div.progress-circle")!=null&&(document.querySelector("div.progress-circle").style.borderWidth=this.bgIntervalDivWidth+"px")}else this.fetchBackgroundImage()},setBackgroundImage(e=this.mapBackgroundFallback){document.querySelector("div#app>canvas").style.background="url("+e.url+")",document.querySelector("div#app>canvas").style.backgroundColor="rgba(0, 0, 0, "+this.backgroundAlpha+")",document.querySelector("div#app>canvas").style.backgroundSize="cover",document.querySelector("div#app>canvas").style.backgroundBlendMode="darken"},removeBackgroundImage(){document.querySelector("div#app>canvas").style.background="",document.querySelector("div#app>canvas").style.backgroundColor=this.isDarkMode?"#000":"#fff",document.querySelector("div#app>canvas").style.backgroundSize="",document.querySelector("div#app>canvas").style.backgroundBlendMode=""},randomItem(e){return e[Math.floor(Math.random()*e.length)]}},unmounted(){clearInterval(this.colorModeInterval),clearInterval(this.bgInterval),this.wasInDarkMode||this.$emit("toggleDarkMode"),this.removeBackgroundImage()},components:{ShowcaseList:g}},m=e=>(I("data-v-4dc41dcd"),e=e(),b(),e),w={key:0,class:"bgImage-desc is-size-6 has-text-centered"},S=m(()=>r("i",{class:"fa fa-map","aria-hidden":"true"},null,-1)),T={key:1,class:"bgImage-desc is-size-6 has-text-centered"},B=m(()=>r("i",{class:"fa fa-map","aria-hidden":"true"},null,-1));function D(e,t,c,i,a,n){const p=k("ShowcaseList");return s(),l(f,null,[r("div",null,[v(p,{showcases:a.data.trackmaniaShowcase},null,8,["showcases"])]),a.mapBackground!=null?(s(),l("div",w,[S,d("  "+o(a.mapBackground.name)+" by "+o(a.mapBackground.author)+" ",1),r("div",{class:"progress-circle",onClick:t[0]||(t[0]=(...h)=>n.fetchBackgroundImage&&n.fetchBackgroundImage(...h))})])):(s(),l("div",T,[B,d("  "+o(a.mapBackgroundFallback.name)+" by "+o(a.mapBackgroundFallback.author),1)]))],64)}const x=u(y,[["render",D],["__scopeId","data-v-4dc41dcd"]]);export{x as default};
