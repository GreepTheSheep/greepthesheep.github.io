import{_ as o,o as n,c}from"./index-5e7603ca.js";const s={props:{isDarkMode:{type:Boolean}},data(){return{mapBackground:null,mapBackgroundFallback:{mxID:36270,url:"https://i.imgur.com/f7J7XxF.webp",name:"Opuntia",author:"SlÃ¡ys & htimh"},backgroundAlpha:.65,bgInterval:null}},mounted(){window.fetch?this.fetchBackgroundImage():this.setBackgroundImage(),this.bgInterval=setInterval(()=>{this.backgroundAlpha=this.isDarkMode?.65:0,document.querySelector("div#app>canvas").style.backgroundColor="rgba(0, 0, 0, "+this.backgroundAlpha+")"},0)},methods:{async fetchBackgroundImage(){let e=await fetch("/api/trackmaniabackgrounds.json");if(!e.ok)return console.error("Error while fecthing backgrounds from API:",e.status,e.statusText),this.setBackgroundImage();let a=await e.json(),t=Object.keys(a),r=this.randomItem(t);this.mapBackground=this.randomItem(a[r]),this.setBackgroundImage(this.mapBackground)},setBackgroundImage(e=this.mapBackgroundFallback){document.querySelector("div#app>canvas").style.background="url("+e.url+")",document.querySelector("div#app>canvas").style.backgroundColor="rgba(0, 0, 0, "+this.backgroundAlpha+")",document.querySelector("div#app>canvas").style.backgroundSize="cover",document.querySelector("div#app>canvas").style.backgroundBlendMode="darken"},removeBackgroundImage(){document.querySelector("div#app>canvas").style.background="",document.querySelector("div#app>canvas").style.backgroundColor=this.isDarkMode?"#000":"#fff",document.querySelector("div#app>canvas").style.backgroundSize="",document.querySelector("div#app>canvas").style.backgroundBlendMode=""},randomItem(e){return e[Math.floor(Math.random()*e.length)]}},unmounted(){clearInterval(this.bgInterval),this.removeBackgroundImage()}};function d(e,a,t,r,u,l){return n(),c("div")}const m=o(s,[["render",d]]);export{m as default};
